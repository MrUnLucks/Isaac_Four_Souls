{"id":-1,"name":"Onboarding diagram","userId":-1,"createdAt":"","updatedAt":"","content":{"items":[{"uid":"uXikHULKIM","position":{"x":190,"y":-1590},"sizes":{"width":399.9375,"height":294.5},"autoheight":true,"blockContent":{"type":"doc","content":[{"type":"filePathNode","attrs":{"pathToFile":"","version":1},"content":[{"type":"text","marks":[{"type":"bold"}],"text":"src\\network\\room.rs"}]},{"type":"codeBlock","attrs":{"language":"rust","wrapCode":true},"content":[{"type":"text","text":"pub struct Room {\r\n    id: String,\r\n    name: String,\r\n    players: HashMap<String, String>,\n    state: RoomState,\n    max_players: usize,\r\n    min_players: usize,\r\n    players_ready: HashSet<String>,\r\n}"}]}]},"nodeType":"block"},{"uid":"zgdNJaFiwO","position":{"x":190,"y":-2040},"sizes":{"width":399.9375,"height":259.5},"autoheight":true,"blockContent":{"type":"doc","content":[{"type":"filePathNode","attrs":{"pathToFile":"","version":1},"content":[{"type":"text","marks":[{"type":"bold"}],"text":"src\\network\\room_manager.rs"}]},{"type":"codeBlock","attrs":{"language":"rust","wrapCode":true},"content":[{"type":"text","text":"pub struct RoomManager {\r\n    pub rooms: HashMap<String, Room>,\r\n    pub connection_to_room_info: HashMap<String, PlayerRoomInfo>, \n    pub rooms_connections_map: HashMap<String, HashSet<String>>, \r\n}"}]}]},"nodeType":"block"},{"uid":"AR9Qo3BFm2","position":{"x":-2140,"y":-1170},"sizes":{"width":399.953125,"height":189.5},"autoheight":true,"blockContent":{"content":[{"type":"filePathNode","attrs":{"pathToFile":"","version":1},"content":[{"type":"text","marks":[{"type":"bold"}],"text":"src\\network\\server.rs"}]},{"type":"codeBlock","attrs":{"language":"rust","wrapCode":true},"content":[{"type":"text","text":"pub struct WebsocketServer {\r\n    address: String,\r\n}"}]}]},"nodeType":"block"},{"uid":"OqI_mFVanI","position":{"x":-2140,"y":-940},"sizes":{"width":399.984375,"height":207},"autoheight":true,"blockContent":{"content":[{"type":"filePathNode","attrs":{"pathToFile":"","version":1},"content":[{"type":"text","marks":[{"type":"bold"}],"text":"src\\network\\connection_manager.rs"}]},{"type":"codeBlock","attrs":{"language":"rust","wrapCode":true},"content":[{"type":"text","text":"pub struct ConnectionManager {\r\n    pub connections: HashMap<String, WebSocketConnection>,\r\n}"}]}]},"nodeType":"block"},{"uid":"ryw8jPsPVW","position":{"x":-2130,"y":-1550},"sizes":{"width":399.984375,"height":329.5},"autoheight":true,"blockContent":{"type":"doc","content":[{"type":"filePathNode","attrs":{"pathToFile":"","version":1},"content":[{"type":"text","marks":[{"type":"bold"}],"text":"src\\network\\game_message_loop_registry.rs"}]},{"type":"codeBlock","attrs":{"language":"rust","wrapCode":true},"content":[{"type":"text","text":"pub struct GameMessageLoopRegistry {\r\n    // DashMap is lock-free - no Arc<Mutex<>> needed!\r\n    game_message_loops: DashMap<String, (mpsc::Sender<GameEvent>, tokio::task::JoinHandle<()>)>, // room_id -> game event sender\r\n    connection_ids_to_room_info: DashMap<String, (String, String)>, // conn_id -> (room_id, player_id)\r\n}"}]}]},"nodeType":"block"},{"uid":"oIiu1fuOfm","position":{"x":-1250,"y":-900},"sizes":{"width":579.984375,"height":242},"autoheight":true,"blockContent":{"content":[{"type":"filePathNode","attrs":{"pathToFile":"","version":1},"content":[{"type":"text","marks":[{"type":"bold"}],"text":"src\\game\\board.rs"}]},{"type":"codeBlock","attrs":{"language":"rust","wrapCode":true},"content":[{"type":"text","text":"pub struct Board {\r\n    pub loot_deck: Vec<LootCard>,\r\n    pub loot_discard: Vec<LootCard>,\r\n    pub player_hands: HashMap<String, Vec<LootCard>>, // player_id -> hand\r\n}"}]}]},"nodeType":"block"},{"uid":"FiZuY_Zo4L","position":{"x":-930,"y":-1430},"sizes":{"width":399.984375,"height":224.5},"autoheight":true,"blockContent":{"content":[{"type":"filePathNode","attrs":{"pathToFile":"","version":1},"content":[{"type":"text","marks":[{"type":"bold"}],"text":"src\\game\\event_handler.rs"}]},{"type":"codeBlock","attrs":{"language":"rust","wrapCode":true},"content":[{"type":"text","text":"pub struct EventHandler {\r\n    players_id_to_connection_id: HashMap<String, String>,\r\n    room_connections_id: Vec<String>,\r\n}"}]}]},"nodeType":"block"},{"uid":"_sQJh2urnZ","position":{"x":-930,"y":-1740},"sizes":{"width":399.984375,"height":224.5},"autoheight":true,"blockContent":{"content":[{"type":"filePathNode","attrs":{"pathToFile":"","version":1},"content":[{"type":"text","marks":[{"type":"bold"}],"text":"src\\game\\game_coordinator.rs"}]},{"type":"codeBlock","attrs":{"language":"rust","wrapCode":true},"content":[{"type":"text","text":"pub struct GameCoordinator {\r\n    game_state: GameState,\r\n    event_handler: EventHandler,\r\n    state_broadcaster: StateBroadcaster,\r\n}"}]}]},"nodeType":"block"},{"uid":"tynnAqnb7g","position":{"x":-920,"y":-2120},"sizes":{"width":399.984375,"height":189.5},"autoheight":true,"blockContent":{"content":[{"type":"filePathNode","attrs":{"pathToFile":"","version":1},"content":[{"type":"text","marks":[{"type":"bold"}],"text":"src\\game\\game_message_loop.rs"}]},{"type":"codeBlock","attrs":{"language":"rust","wrapCode":true},"content":[{"type":"text","text":"pub struct GameMessageLoop {\r\n    coordinator: GameCoordinator,\r\n}"}]}]},"nodeType":"block"},{"uid":"j53hVE2G4H","position":{"x":-1470,"y":-1450},"sizes":{"width":399.984375,"height":312},"autoheight":true,"blockContent":{"content":[{"type":"filePathNode","attrs":{"pathToFile":"","version":1},"content":[{"type":"text","marks":[{"type":"bold"}],"text":"src\\game\\game_state.rs"}]},{"type":"codeBlock","attrs":{"language":"rust","wrapCode":true},"content":[{"type":"text","text":"pub struct GameState {\r\n    pub turn_order: TurnOrder,\r\n    pub current_phase: TurnPhases,\r\n    pub current_priority_player: String,\r\n    pub players_passed_priority: HashSet<String>,\r\n    pub board: Board,\r\n    pub game_running: bool,\r\n    pub waiting_for_priority: bool,\r\n}"}]}]},"nodeType":"block"},{"uid":"szkEQLlYKE","position":{"x":-370,"y":-1460},"sizes":{"width":399.984375,"height":224.5},"autoheight":true,"blockContent":{"content":[{"type":"filePathNode","attrs":{"pathToFile":"","version":1},"content":[{"type":"text","marks":[{"type":"bold"}],"text":"src\\game\\state_broadcaster.rs"}]},{"type":"codeBlock","attrs":{"language":"rust","wrapCode":true},"content":[{"type":"text","text":"pub struct StateBroadcaster {\r\n    players_id_to_connection_id: HashMap<String, String>,\r\n    room_connections_id: Vec<String>,\r\n}"}]}]},"nodeType":"block"},{"uid":"9VnFljs99i","position":{"x":-1660,"y":-900},"sizes":{"width":399.984375,"height":224.5},"autoheight":true,"blockContent":{"content":[{"type":"filePathNode","attrs":{"pathToFile":"","version":1},"content":[{"type":"text","marks":[{"type":"bold"}],"text":"src\\game\\turn_order.rs"}]},{"type":"codeBlock","attrs":{"language":"rust","wrapCode":true},"content":[{"type":"text","text":"pub struct TurnOrder {\r\n    pub order: Vec<String>,\r\n    pub active_player_id: String,\r\n    turn_counter: u32,\r\n}"}]}]},"nodeType":"block"}],"configs":{"centerX":1629.6451079399824,"centerY":1387.9152549151524,"zoomLevel":0.6589334077668482},"arrowData":{"arrowsMap":{"arrow-point-bI0wBh3Ufk-bottom-point-PSPLIYKa9J-top":{"to":"point-PSPLIYKa9J-top","from":"point-bI0wBh3Ufk-bottom","label":"Normal Box","direction":"ft","selectable":true},"arrow-point-bI0wBh3Ufk-bottom-point-ytXK_ayIc1-top":{"to":"point-ytXK_ayIc1-top","from":"point-bI0wBh3Ufk-bottom","label":"Code Box","direction":"ft","selectable":true},"arrow-point-hyyRZE3E8u-right-point-6ZopTaEaDZ-left":{"to":"point-6ZopTaEaDZ-left","from":"point-hyyRZE3E8u-right","label":"call","direction":"ft","selectable":true}},"pointsMap":{"point-PSPLIYKa9J-top":{"x":805.9999797489683,"y":60,"id":"point-PSPLIYKa9J-top","direction":"top"},"point-ytXK_ayIc1-top":{"x":205.99999493724206,"y":60,"id":"point-ytXK_ayIc1-top","direction":"top"},"point-6ZopTaEaDZ-left":{"x":220,"y":605.9999898744841,"id":"point-6ZopTaEaDZ-left","direction":"left"},"point-hyyRZE3E8u-right":{"x":100,"y":606,"id":"point-hyyRZE3E8u-right","direction":"right"},"point-bI0wBh3Ufk-bottom":{"x":515.9999797489683,"y":-40,"id":"point-bI0wBh3Ufk-bottom","direction":"bottom"}},"edgesMap":{"edge-zgdNJaFiwO-zgdNJaFiwO-bottom-uXikHULKIM-uXikHULKIM-top":{"uid":"edge-zgdNJaFiwO-zgdNJaFiwO-bottom-uXikHULKIM-uXikHULKIM-top","fromNodeId":"zgdNJaFiwO","fromHandleId":"zgdNJaFiwO-bottom","toNodeId":"uXikHULKIM","toHandleId":"uXikHULKIM-top","direction":"ft","selectable":true,"type":"solid","content":{"label":""}},"edge-_sQJh2urnZ-_sQJh2urnZ-bottom-FiZuY_Zo4L-FiZuY_Zo4L-top":{"uid":"edge-_sQJh2urnZ-_sQJh2urnZ-bottom-FiZuY_Zo4L-FiZuY_Zo4L-top","fromNodeId":"_sQJh2urnZ","fromHandleId":"_sQJh2urnZ-bottom","toNodeId":"FiZuY_Zo4L","toHandleId":"FiZuY_Zo4L-top","direction":"ft","selectable":true,"type":"solid","content":{"label":""}},"edge-_sQJh2urnZ-_sQJh2urnZ-left-j53hVE2G4H-j53hVE2G4H-top":{"uid":"edge-_sQJh2urnZ-_sQJh2urnZ-left-j53hVE2G4H-j53hVE2G4H-top","fromNodeId":"_sQJh2urnZ","fromHandleId":"_sQJh2urnZ-left","toNodeId":"j53hVE2G4H","toHandleId":"j53hVE2G4H-top","direction":"ft","selectable":true,"type":"solid","content":{"label":""}},"edge-_sQJh2urnZ-_sQJh2urnZ-right-szkEQLlYKE-szkEQLlYKE-top":{"uid":"edge-_sQJh2urnZ-_sQJh2urnZ-right-szkEQLlYKE-szkEQLlYKE-top","fromNodeId":"_sQJh2urnZ","fromHandleId":"_sQJh2urnZ-right","toNodeId":"szkEQLlYKE","toHandleId":"szkEQLlYKE-top","direction":"ft","selectable":true,"type":"solid","content":{"label":""}},"edge-tynnAqnb7g-tynnAqnb7g-bottom-_sQJh2urnZ-_sQJh2urnZ-top":{"uid":"edge-tynnAqnb7g-tynnAqnb7g-bottom-_sQJh2urnZ-_sQJh2urnZ-top","fromNodeId":"tynnAqnb7g","fromHandleId":"tynnAqnb7g-bottom","toNodeId":"_sQJh2urnZ","toHandleId":"_sQJh2urnZ-top","direction":"ft","selectable":true,"type":"solid","content":{"label":""}},"edge-j53hVE2G4H-j53hVE2G4H-bottom-9VnFljs99i-9VnFljs99i-top":{"uid":"edge-j53hVE2G4H-j53hVE2G4H-bottom-9VnFljs99i-9VnFljs99i-top","fromNodeId":"j53hVE2G4H","fromHandleId":"j53hVE2G4H-bottom","toNodeId":"9VnFljs99i","toHandleId":"9VnFljs99i-top","direction":"ft","selectable":true,"type":"solid","content":{"label":""}}}}}}